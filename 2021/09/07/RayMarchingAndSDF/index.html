<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="è§£è¡£åˆä½œèŒ¶ç“œå®¢ï¼Œå€šæ§›åŒçœ‹çƒŸé›¨å³°">
    

    <!--Author-->
    
        <meta name="author" content="èŒ¶ç“œå®¢">
    

    <!-- Title -->
    
    <title>RayMarching And SDF | èŒ¶ç“œå®¢</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Noto+Serif:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- jQuery -->
    <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="èŒ¶ç“œå®¢" type="application/atom+xml">
</head>

<body>

    <!-- Content -->
    <section class="article-container">
    <!-- Back Home -->
    <a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

        <!-- Page Header -->
        <header class="intro-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <div class="post-heading">
                            <h1>
                                RayMarching And SDF
                            </h1>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Post Content -->
        <article>
            <div class="container">
                <div class="row">
                    <!-- Post Main Content -->
                    <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <p>ã€ŠRay Marching and Signed Distance Functionsã€‹çš„è¯‘æ–‡ã€‚</p>
<span id="more"></span>
<p><a target="_blank" rel="noopener" href="http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/">åŸæ–‡</a></p>
<h2 id="Signed-Distance-Functions"><a href="#Signed-Distance-Functions" class="headerlink" title="Signed Distance Functions"></a>Signed Distance Functions</h2><p>SDFï¼Œç¬¦å·è·ç¦»å‡½æ•°ï¼Œç”¨äºè®¡ç®—ç‚¹å’Œå¹³é¢çš„ä½ç½®å…³ç³»ï¼Œæ ¹æ®è¿”å›å€¼çš„ç¬¦å·ï¼Œæ¥åˆ¤æ–­ç‚¹æ˜¯åœ¨å¹³é¢å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ã€‚</p>
<p>ï¼ˆåŸæ–‡è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªåœ†å¿ƒåœ¨åŸç‚¹ã€åŠå¾„ä¸º1çš„çƒä½“åšç¤ºä¾‹ã€‚ï¼‰</p>
<p>å¯¹ä¸€äº›å¸¸è§çš„3Dç‰©ä½“çš„SDFå‡½æ•°ï¼Œå‚è§<a target="_blank" rel="noopener" href="https://iquilezles.org/www/articles/distfunctions/distfunctions.htm">Modeling with Distance Functions</a>ã€‚</p>
<h2 id="The-Raymarching-Algorithm"><a href="#The-Raymarching-Algorithm" class="headerlink" title="The Raymarching Algorithm"></a>The Raymarching Algorithm</h2><p>ä¸å…‰çº¿è·Ÿè¸ªä¸€æ ·ï¼Œæˆ‘ä»¬ä¸ºç›¸æœºé€‰æ‹©ä¸€ä¸ªä½ç½®ï¼Œåœ¨å…¶å‰é¢æ”¾ç½®ä¸€ä¸ªç½‘æ ¼ï¼Œé€šè¿‡ç½‘æ ¼ä¸­çš„æ¯ä¸ªç‚¹ä»ç›¸æœºå‘é€å…‰çº¿ï¼Œæ¯ä¸ªç½‘æ ¼ç‚¹å¯¹åº”äºè¾“å‡ºå›¾åƒä¸­çš„ä¸€ä¸ªåƒç´ ã€‚</p>
<p align="center">
    <img src="http://jamie-wong.com/images/16-07-11/raytrace.png" width="95%">
    <br />    <small> From "Ray tracing" on Wikipedia </small>
</p>

<p>åœ¨å…‰çº¿è·Ÿè¸ªä¸­ï¼Œæ•´ä¸ªåœºæ™¯æ˜¯æ ¹æ®æœ‰ç¬¦å·è·ç¦»å‡½æ•°å®šä¹‰çš„ã€‚ä½¿ç”¨SDFå¯ä»¥å¿«é€Ÿè€Œå®‰å…¨åœ°è®©å…‰çº¿å‰è¿›æœ€å¤§æ­¥ä¼ï¼ˆmaximum stepï¼‰ï¼Œç›´è‡³ç‰©ä½“è¡¨é¢ï¼ˆsurfaceï¼‰ã€‚</p>
<p>å¦‚å›¾ï¼Œ$p_0$ æ˜¯æ‘„åƒæœºã€‚è“è‰²çº¿æ®µæ˜¯ä»æ‘„åƒæœºç©¿è¿‡è§†å›¾å¹³é¢çš„å…‰çº¿ã€‚</p>
<p align="center">
    <img src="http://jamie-wong.com/images/16-07-11/spheretrace.jpg" width="95%">
    <br />    <small> From [GPU Gems 2: Chapter 8.](https://developer.nvidia.com/gpugems/gpugems2/part-i-geometric-complexity/chapter-8-pixel-displacement-mapping-distance-functions) </small>
</p>

<p>åœ¨GLSLçš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">float depth &#x3D; start;</span><br><span class="line">for (int i &#x3D; 0; i &lt; MAX_MARCHING_STEPS; i++) &#123;</span><br><span class="line">    float dist &#x3D; sceneSDF(eye + depth * viewRayDirection);</span><br><span class="line">    if (dist &lt; EPSILON) &#123;</span><br><span class="line">        &#x2F;&#x2F; We&#39;re inside the scene surface!</span><br><span class="line">        return depth;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; Move along the view ray</span><br><span class="line">    depth +&#x3D; dist;</span><br><span class="line"></span><br><span class="line">    if (depth &gt;&#x3D; end) &#123;</span><br><span class="line">        &#x2F;&#x2F; Gone too far; give up</span><br><span class="line">        return end;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">return end;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯æ¯æ¬¡å‰è¿›å½“å‰å…‰ç‚¹ä¸çƒè¡¨é¢çš„è·ç¦»ï¼ŒçŸ¥é“å€¼å°äº0.001ã€‚</p>
<p>shadertoyï¼š<a target="_blank" rel="noopener" href="https://www.shadertoy.com/view/llt3R4">Ray Marching: Part 1</a>ã€‚</p>
<h2 id="Surface-Normals-and-Lighting"><a href="#Surface-Normals-and-Lighting" class="headerlink" title="Surface Normals and Lighting"></a>Surface Normals and Lighting</h2><p>è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„å¤§å¤šæ•°ç…§æ˜æ¨¡å‹éƒ½ä½¿ç”¨æ›²é¢æ³•çº¿çš„ä¸€äº›æ¦‚å¿µæ¥è®¡ç®—æ›²é¢ä¸Šç»™å®šç‚¹å¤„æè´¨çš„é¢œè‰²ã€‚å½“æ›²é¢ç”±æ˜¾å¼å‡ ä½•ä½“ï¼ˆå¦‚å¤šè¾¹å½¢ï¼‰å®šä¹‰æ—¶ï¼Œé€šå¸¸ä¼šä¸ºæ¯ä¸ªé¡¶ç‚¹æŒ‡å®šæ³•çº¿ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡æ’å€¼å‘¨å›´é¡¶ç‚¹æ³•çº¿æ‰¾åˆ°é¢ä¸Šä»»ä½•ç»™å®šç‚¹çš„æ³•çº¿ã€‚</p>
<p>åœ¨ä½¿ç”¨SDFæ—¶ï¼Œç”¨æ¢¯åº¦ï¼ˆgradientï¼‰æ¥å®šä¹‰æ›²é¢æ³•çº¿ã€‚åœ¨ç‚¹ $(x,y,z)$ ä¸Šçš„æ¢¯åº¦å‡½æ•° $f$ ï¼Œè¡¨ç¤ºçš„æ˜¯æ²¿ç€æŸä¸ªæ–¹å‘ï¼Œä½¿å¾—ç§»åŠ¨ç‚¹ $(x,y,z)$ å˜åŒ–æœ€å¿«çš„å€¼ã€‚</p>
<p>$f(x,y,z)$ çš„æ¢¯åº¦å†™ä½œ $\nabla f$ ã€‚</p>
<script type="math/tex; mode=display">
\nabla f =
\left(
\frac{\partial f}{\partial x},\frac{\partial f}{\partial y},\frac{\partial f}{\partial z}
\right)</script><p>ä½†æ˜¯æ²¡æœ‰å¿…è¦åœ¨è¿™é‡Œè¿›è¡Œå¾®ç§¯åˆ†è¿ç®—ã€‚æˆ‘ä»¬å°†é€šè¿‡é‡‡æ ·æ›²é¢ä¸Šç‚¹å‘¨å›´çš„ç‚¹æ¥è¿›è¡Œè¿‘ä¼¼ï¼Œè€Œä¸æ˜¯å–å‡½æ•°çš„å®å¯¼æ•°ï¼Œè¿™å¾ˆåƒåœ¨å­¦ä¹ å¦‚ä½•è¿›è¡Œå¯¼æ•°ä¹‹å‰ï¼Œå¦‚ä½•è®¡ç®—å‡½æ•°ä¸­çš„æ–œç‡ã€‚</p>
<script type="math/tex; mode=display">
\overset{\to}{n}  = \begin{bmatrix}
f(x + \varepsilon,y,z) - f(x - \varepsilon,y,z) \\
f(x ,y+ \varepsilon,z) - f(x,y - \varepsilon,z) \\
f(x ,y,z+ \varepsilon) - f(x ,y,z- \varepsilon) 
\end{bmatrix}</script><p>GLSLçš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Using the gradient of the SDF, estimate the normal on the surface at point p.</span><br><span class="line"> *&#x2F;</span><br><span class="line">vec3 estimateNormal(vec3 p) &#123;</span><br><span class="line">    return normalize(vec3(</span><br><span class="line">        sceneSDF(vec3(p.x + EPSILON, p.y, p.z)) - sceneSDF(vec3(p.x - EPSILON, p.y, p.z)),</span><br><span class="line">        sceneSDF(vec3(p.x, p.y + EPSILON, p.z)) - sceneSDF(vec3(p.x, p.y - EPSILON, p.z)),</span><br><span class="line">        sceneSDF(vec3(p.x, p.y, p.z  + EPSILON)) - sceneSDF(vec3(p.x, p.y, p.z - EPSILON))</span><br><span class="line">    ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>shadertoyï¼š<a target="_blank" rel="noopener" href="https://www.shadertoy.com/view/lt33z7">Ray Marching: Part 2</a>ã€‚</p>
<h2 id="Moving-the-Camera"><a href="#Moving-the-Camera" class="headerlink" title="Moving the Camera"></a>Moving the Camera</h2><p>åœ¨GLSLä¸­ï¼Œå®ç°ç±»ä¼¼gluLookAtå‡½æ•°çš„åŠŸèƒ½ï¼Œæä¾›ä¸€ä¸ªå˜æ¢çŸ©é˜µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Return a transformation matrix that will transform a ray from view space</span><br><span class="line"> * to world coordinates, given the eye point, the camera target, and an up vector.</span><br><span class="line"> *</span><br><span class="line"> * This assumes that the center of the camera is aligned with the negative z axis in</span><br><span class="line"> * view space when calculating the ray marching direction.</span><br><span class="line"> *&#x2F;</span><br><span class="line">mat4 viewMatrix(vec3 eye, vec3 center, vec3 up) &#123;</span><br><span class="line">	vec3 f &#x3D; normalize(center - eye);</span><br><span class="line">	vec3 s &#x3D; normalize(cross(f, up));</span><br><span class="line">	vec3 u &#x3D; cross(s, f);</span><br><span class="line">	return mat4(</span><br><span class="line">		vec4(s, 0.0),</span><br><span class="line">		vec4(u, 0.0),</span><br><span class="line">		vec4(-f, 0.0),</span><br><span class="line">		vec4(0.0, 0.0, 0.0, 1)</span><br><span class="line">	);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>shadertoyï¼š<a target="_blank" rel="noopener" href="https://www.shadertoy.com/view/Xtd3z7">Ray Marching: Part 3</a>ã€‚</p>
<h2 id="Constructive-Solid-Geometry"><a href="#Constructive-Solid-Geometry" class="headerlink" title="Constructive Solid Geometry"></a>Constructive Solid Geometry</h2><p>CSGï¼Œæ„å»ºå®ä½“å‡ ä½•ï¼Œä½¿ç”¨ç®€å•å‡ ä½•ä½“é€šè¿‡é›†åˆè¿ç®—å¾—åˆ°çš„å¤æ‚å‡ ä½•ä½“ã€‚é›†åˆè¿ç®—æœ‰äº¤é›†ï¼ˆintersectionï¼‰ã€å¹¶é›†ï¼ˆunionï¼‰ä»¥åŠå·®é›†ï¼ˆdifferenceï¼‰ã€‚</p>
<p align="center">
    <img src="http://jamie-wong.com/images/16-07-11/csg.png" width="95%">
    <br />    <small> From "Constructive solid geometry" on Wikipedia </small>
</p>

<p>å½“ç»„åˆè¡¨ç¤ºä¸ºSDFçš„ä¸¤ä¸ªæ›²é¢æ—¶ï¼Œè¿™äº›æ“ä½œéƒ½å¯ä»¥ç®€æ´åœ°è¡¨è¾¾ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">float intersectSDF(float distA, float distB) &#123;</span><br><span class="line">    return max(distA, distB);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float unionSDF(float distA, float distB) &#123;</span><br><span class="line">    return min(distA, distB);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float differenceSDF(float distA, float distB) &#123;</span><br><span class="line">    return max(distA, -distB);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡ ä½•ä½“ç»„åˆå‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">float sceneSDF(vec3 samplePoint) &#123;</span><br><span class="line">    float sphereDist &#x3D; sphereSDF(samplePoint &#x2F; 1.2) * 1.2;</span><br><span class="line">    float cubeDist &#x3D; cubeSDF(samplePoint) * 1.2;</span><br><span class="line">    return intersectSDF(cubeDist, sphereDist);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>shadertoyï¼š<a target="_blank" rel="noopener" href="https://www.shadertoy.com/view/MttGz7">Ray Marching: Part 4</a>ã€‚</p>
<h2 id="Model-Transformations"><a href="#Model-Transformations" class="headerlink" title="Model Transformations"></a>Model Transformations</h2><p><strong>Rotation and Translation</strong></p>
<p>å¯¹ä¸€ä¸ªSDFè¡¨é¢è¿›è¡Œå¹³ç§»æˆ–å˜æ¢ï¼Œå¯ä»¥åœ¨è®¡ç®—SDFä¹‹å‰å¯¹è¿™ä¸ªç‚¹è¿›è¡Œé€†å˜æ¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">float sceneSDF(vec3 samplePoint) &#123;</span><br><span class="line">    float sphereDist &#x3D; sphereSDF(samplePoint &#x2F; 1.2) * 1.2;</span><br><span class="line">    float cubeDist &#x3D; cubeSDF(samplePoint + vec3(0.0, sin(iGlobalTime), 0.0));</span><br><span class="line">    return intersectSDF(cubeDist, sphereDist);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>shadertoyï¼š<a target="_blank" rel="noopener" href="https://www.shadertoy.com/view/XtcGWn">Ray Marching: Part 5</a>ã€‚</p>
<p>è¿›ä¸€æ­¥æ¥è¯´ï¼Œæ·»åŠ ä¸€ä¸ªæ—‹è½¬çŸ©é˜µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mat4 rotateY(float theta) &#123;</span><br><span class="line">    float c &#x3D; cos(theta);</span><br><span class="line">    float s &#x3D; sin(theta);</span><br><span class="line"></span><br><span class="line">    return mat4(</span><br><span class="line">        vec4(c, 0, s, 0),</span><br><span class="line">        vec4(0, 1, 0, 0),</span><br><span class="line">        vec4(-s, 0, c, 0),</span><br><span class="line">        vec4(0, 0, 0, 1)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">float sceneSDF(vec3 samplePoint) &#123;</span><br><span class="line">    float sphereDist &#x3D; sphereSDF(samplePoint &#x2F; 1.2) * 1.2;</span><br><span class="line"></span><br><span class="line">    vec3 cubePoint &#x3D; (invert(rotateY(iGlobalTime)) * vec4(samplePoint, 1.0)).xyz;</span><br><span class="line"></span><br><span class="line">    float cubeDist &#x3D; cubeSDF(cubePoint);</span><br><span class="line">    return intersectSDF(cubeDist, sphereDist);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åº”ç”¨åˆ°sceneSDFå‡½æ•°å°±æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">float sceneSDF(vec3 samplePoint) &#123;</span><br><span class="line">    float sphereDist &#x3D; sphereSDF(samplePoint &#x2F; 1.2) * 1.2;</span><br><span class="line"></span><br><span class="line">    vec3 cubePoint &#x3D; (rotateY(-iGlobalTime) * vec4(samplePoint, 1.0)).xyz;</span><br><span class="line"></span><br><span class="line">    float cubeDist &#x3D; cubeSDF(cubePoint);</span><br><span class="line">    return intersectSDF(cubeDist, sphereDist);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Uniform Scaling</strong></p>
<p>ç¼©æ”¾ä¼šæ”¹å˜ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå¼•èµ·è·ç¦»åœºå¤±çœŸã€‚</p>
<p>æ‰€ä»¥åœ¨ç¼©æ”¾ä¹‹åçš„ç‚¹ï¼Œç»è¿‡SDFåˆ¤æ–­ä¹‹åï¼Œéœ€è¦å¯¹ç»“æœè¿›è¡Œæ ¡å‡†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float dist &#x3D; someSDF(samplePoint &#x2F; scalingFactor) * scalingFactor;</span><br></pre></td></tr></table></figure>
<p><strong>Non-uniform scaling and beyond</strong></p>
<p>é¦–å…ˆè®¡ç®—ä¸‹ä¸å‡åŒ€å˜æ¢æ—¶å¯¼è‡´çš„å¤±çœŸå€¼ï¼š</p>
<script type="math/tex; mode=display">
sphereSDF(x,y,z) = \sqrt{(2x)^2 + y ^2 +z^2} - 1</script><p>ç»è¿‡å˜æ¢ä¹‹åï¼Œå¯ä»¥ä¹˜ä»¥ä»–ä»¬ä¹‹é—´æœ€å°å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">float dist &#x3D; someSDF(samplePoint &#x2F; vec3(s_x, s_y, s_z)) * min(s_x, min(s_y, s_z));</span><br></pre></td></tr></table></figure>
<p>shadertoyï¼š<a target="_blank" rel="noopener" href="https://www.shadertoy.com/view/4tcGDr">Ray Marching: Part 6</a>ã€‚</p>


                            <!-- Meta -->
                            <div class="post-meta">
                                <hr>
                                <br>
                                <div class="post-tags">
                                    
                                        

<a href="/tags/SDF/">#SDF</a>


                                            
                                </div>
                                <div class="post-date">
                                    
                                        2021-09-07
                                    
                                </div>
                            </div>
                    </div>

                    <!-- Comments -->
                    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                        <!-- Disqus Comments -->


                    </div>
                </div>
            </div>
        </article>
</section>

<!-- Image viewer-->

    <!-- Custom picture view-->
    <link href="/css/viewer.min.css" rel="stylesheet" />
    <script
      src="/js/viewer.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    
    <script type="text/javascript">
      // set image viewer
      Viewer.setDefaults({
        zoomRatio: [0.5],
        navbar: false,
        toolbar: false,
        button: false,
        title: [2, (image, imageData) => `${image.alt}`],
        show: function() {
          this.viewer.zoomTo(0.5);
        }
      });
      var imageList = document.getElementsByTagName("img");
      Array.prototype.forEach.call(imageList, element => {
        var viewer = new Viewer(element);
      });
    </script>

    

<!-- TOC -->

    <aside id="article-toc" role="navigation" class="fixed">
        <div id="article-toc-inner">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Signed-Distance-Functions"><span class="toc-text">Signed Distance Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Raymarching-Algorithm"><span class="toc-text">The Raymarching Algorithm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Surface-Normals-and-Lighting"><span class="toc-text">Surface Normals and Lighting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Moving-the-Camera"><span class="toc-text">Moving the Camera</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Constructive-Solid-Geometry"><span class="toc-text">Constructive Solid Geometry</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Model-Transformations"><span class="toc-text">Model Transformations</span></a></li></ol>
        </div>
    </aside>

    <!-- Scripts -->
    <script type="text/javascript">
    console.log("Â© zchen9 ğŸ™‹ 2015-" + new Date().getFullYear());
</script>
  
    <!-- Google Analytics -->
    

    <!-- Service Worker -->
    <!-- if using service worker -->

    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>