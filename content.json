{"meta":{"title":"茶瓜客","subtitle":"解衣又作茶瓜客，倚槛同看烟雨峰","description":"解衣又作茶瓜客，倚槛同看烟雨峰","author":"茶瓜客","url":"https://www.chaguake.com","root":"/"},"pages":[{"title":"404 Not Found：该页无法显示","date":"2021-03-09T07:38:35.984Z","updated":"2021-03-09T05:57:02.612Z","comments":false,"path":"/404.html","permalink":"https://www.chaguake.com/404.html","excerpt":"","text":""},{"title":"关于","date":"2021-03-11T07:34:30.643Z","updated":"2021-03-11T07:34:30.643Z","comments":true,"path":"about/index.html","permalink":"https://www.chaguake.com/about/index.html","excerpt":"","text":"这个人很懒，什么也没有留下……"},{"title":"书单","date":"2021-03-11T03:27:43.709Z","updated":"2021-03-11T03:27:43.709Z","comments":true,"path":"books/index.html","permalink":"https://www.chaguake.com/books/index.html","excerpt":"","text":""},{"title":"分类","date":"2021-03-09T07:36:46.388Z","updated":"2021-03-09T05:57:02.612Z","comments":false,"path":"categories/index.html","permalink":"https://www.chaguake.com/categories/index.html","excerpt":"","text":""},{"title":"友情链接","date":"2021-03-09T06:20:35.606Z","updated":"2021-03-09T05:57:02.612Z","comments":true,"path":"links/index.html","permalink":"https://www.chaguake.com/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2021-03-11T03:28:04.838Z","updated":"2021-03-11T03:28:04.838Z","comments":true,"path":"repository/index.html","permalink":"https://www.chaguake.com/repository/index.html","excerpt":"","text":""},{"title":"标签","date":"2021-03-09T07:36:46.388Z","updated":"2021-03-09T05:57:02.612Z","comments":false,"path":"tags/index.html","permalink":"https://www.chaguake.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"C++多态之虚函数与虚函数表","slug":"virtual_function_or_table_of_polymorphism","date":"2021-03-13T16:00:00.000Z","updated":"2021-03-14T10:53:29.587Z","comments":true,"path":"2021/03/14/virtual_function_or_table_of_polymorphism/","link":"","permalink":"https://www.chaguake.com/2021/03/14/virtual_function_or_table_of_polymorphism/","excerpt":"","text":"虚函数，是用关键字virtual修饰的类成员函数，但不包括静态函数（static）和构造函数。 内联函数（inline）可以是虚函数。因为内联函数是作用于编译期间，用于通知编译器是否要将内联函数展开。当虚函数标记为内联函数时，假如该函数呈现运行时多态，那么编译器会忽略关键字inline。 12345678910111213141516171819202122class Base&#123;public: Base(); ~Base(); virtual void fun1(); virtual void fun2();&#125;class Device:public Base&#123;public: Device(); virtual ~Device();&#x2F;&#x2F;确保Device类正常析构 virtual void fun1(); void fun2();&#x2F;&#x2F;不加关键字virtual也可以 virtual void print();&#125;&#x2F;&#x2F;Device dev;&#x2F;&#x2F;dev.fun1();&#x2F;&#x2F;dev.fun2(); 运行上面代码，可以发现，对象dev有一个指针对象__vfptr。 指针对象__vfptr是虚函数指针，类型为void(*)()，它指向对象dev的数组vftable，即虚函数表。 定义另一个Device类对象，可以看到，两个Device类对象的指针对象__vfptr的地址是一样的，这就意味着，Device类的虚函数表全局只有一份，所有Device类对象都会创建一个虚函数指针，并指向它。 在Device类中定义虚函数print，会发现在__vfptr中并没有发现它，但vftable大小+1，派生另一个类，继承于Device类，其__vfptr和vftable跟Device类一样。 这就说明，继承于Base类，但属于其子类的虚函数都会按顺序写入基类的vftable里。（假如有多继承，那属于其子类的虚函数都会按顺序写入第一个基类的vftable里。） 那假如基类并没有虚函数呢？ 可以看出，vftable会挂在基类的下一级子类中（或者再下一级）。 其他博客的相关文章：C++中的虚函数(表)实现机制以及用C语言对其进行的模拟实现","categories":[{"name":"C/C++","slug":"C-C","permalink":"https://www.chaguake.com/categories/C-C/"}],"tags":[{"name":"C++多态","slug":"C-多态","permalink":"https://www.chaguake.com/tags/C-%E5%A4%9A%E6%80%81/"}]}],"categories":[{"name":"C/C++","slug":"C-C","permalink":"https://www.chaguake.com/categories/C-C/"}],"tags":[{"name":"C++多态","slug":"C-多态","permalink":"https://www.chaguake.com/tags/C-%E5%A4%9A%E6%80%81/"}]}